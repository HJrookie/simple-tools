# File Transfer - 文件传输工具

一个基于 Vue 3 + Vite 构建的现代化文件传输应用，支持 P2P 文件传输和二维码分享。

## 🚀 技术栈

- **前端框架**: Vue 3.5.24
- **构建工具**: Vite 7.2.4
- **UI 组件库**: Ant Design Vue 4.2.6
- **消息协议**: MQTT 5.14.1
- **二维码生成**: qrcode 1.5.4
- **HTTP 请求**: axios 1.13.2
- **样式预处理器**: Sass 1.94.2

## 📦 环境要求

- Node.js >= 20.0.0
- pnpm >= 8.0.0

> 准确的环境要求是 Node.js v22.12.0 ,  pnpm 9.15.0。

## 🔧 安装与配置

### 1. pnpm 换源（推荐）

为了提高依赖安装速度，建议将 pnpm 源切换为国内镜像：

```bash
# 设置淘宝镜像源
pnpm config set registry https://registry.npmmirror.com/
```

### 2. 安装依赖

```bash
# 安装项目依赖
pnpm install
```

### 3. 环境配置

项目包含以下环境配置文件：

- `.env.development` - 开发环境配置
- `.env.prod` - 生产环境配置

## 🛠️ 开发与构建

### 开发模式

```bash
# 启动开发服务器
pnpm dev

# 开发服务器将在 http://localhost:5173 启动
```

### 生产构建

```bash
# 构建生产版本
pnpm build

# 构建后的文件将生成在 dist/ 目录
```



## 🌐 进阶：如何开启公网传输功能？(较为复杂)

为了保证项目的纯粹性与安全性，本项目**默认仅开启局域网模式**。
如果您需要公网传输功能（类似“私人网盘”），请按照以下步骤自行部署后端：


### 前置准备 (必读)
1.  **拥有一个 Cloudflare 账号**。
2. 需要自己注册一个域名, 例如`242847234243234345.xyz`, 这种 xyz 域名很便宜,可以在阿里云、腾讯云、Namecheap、Godaddy 等任何地方买
    - **关键步骤**：购买后，请将域名的 **DNS 服务器 (Nameservers)** 修改为 Cloudflare 提供的地址（即把域名托管到 Cloudflare，这是免费的）。


### 部署步骤


1.  **准备后端**：
    - 注册 Cloudflare 账号并开通 R2 存储桶（免费额度 10GB）。
    - 先在 Cloudflare 控制台创建一个 R2 存储桶，记下存储桶名称, 例如 `share-files`。
    - 创建一个 Worker,`share-backend`，在新建的页面里点那个 `从 Hello World 开始`的按钮，然后将本项目 `worker.js` 的代码复制粘贴进去。
    - 然后需要绑定 R2 存储桶, 因为代码里用到了 env.BUCKET，但 Worker 现在还不知道 BUCKET 是谁, 
    - 点击 Worker `share-backend` 进入设置页面, 页面上有一个绑定按钮, 点击进入绑定页面。再点击 添加绑定, 会弹出来一个页面, 然后在左侧选择`R2 存储桶`, 再点击添加绑定, 然后右侧会有一个抽屉出来, 然后 变量名称 写 BUCKET , 桶 选择 `share-files`。
    - 绑定一个自定义域名（国内访问必须）。例如 `upload.242847234243234345.xyz`。
    - 在 worker 设置里 有个 域和路由, 点击 添加-自定义域 , 然后输入 `upload.242847234243234345.xyz` 。



2.  **配置前端**：
    - 在项目根目录创建 `.env` 文件（参考 `.env.development`）。
    - 填入您的 Worker 域名：
      ```env
      VITE_WORKER_URL=https://upload.242847234243234345.xyz
      ```

3.  **重新运行**：
    - 重启项目，公网传输功能即可解锁。

4. **公网部署**
   如果想要部署项目到公网,可以把项目部署到Netlify, 点击 Netlify 里的 `New site from Git` 按钮, 然后选择你自己的项目仓库, 点击 `Deploy site` 按钮, 然后 Netlify 会自动部署你的项目(注意 这里需要填写一些配置), 部署完成后, 会给你一个域名,类似我这个 `https://f2ff.netlify.app/`

---

## 🛠️ 技术栈一览

| 模块 | 技术选型 | 说明 |
| :--- | :--- | :--- |
| **框架** | Vue 3 (Options API) | 渐进式 JavaScript 框架 |
| **构建** | Vite 7 | 极速冷启动构建工具 |
| **UI** | Ant Design Vue 4 | 企业级 UI 设计语言 |
| **信令** | MQTT (WebSocket) | 使用国内公共 Broker 加速 P2P 握手 |
| **传输** | WebRTC / Axios | 局域网 / 公网 核心传输层 |
| **工具** | QRCode / Sass | 二维码生成 / 样式预处理 |

## 🤝 贡献与部署

欢迎 Fork 本项目并部署属于你自己的传输工具！

## ⚠️ 免责声明

1.  本工具仅用于技术研究与个人设备间文件传输。
2.  **严禁**使用本工具传输涉黄、涉政、暴力等违法违规文件。
3.  局域网模式下数据不经过任何第三方服务器；公网模式下文件由用户自行配置的 Cloudflare 存储桶中转。
4.  作者不对用户传输的内容及因使用本工具产生的任何后果承担法律责任。

---

**如果觉得这个项目对你有帮助，请点个 ⭐️ Star 支持一下！**